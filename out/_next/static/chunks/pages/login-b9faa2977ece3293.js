(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[459],{6429:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return n(5666)}])},640:function(e,t,n){"use strict";n.d(t,{Z:function(){return Users_UsersList}});var o=n(5893),s=n(7294),a=n(4480),r=n(6693),i=n(5403),c=n(1163),l=n(6584),u=n(8759),d=n.n(u),h=n(4054),f=n(3946),p=n(9661),m=n(2510),g=n(1737),_=n(9417),w=n(8456),v=n(2846),y=n(2341),j=n(6191),x=n(1159),S=n(6154),hooks_useAxios=()=>{let[e,t]=(0,s.useState)([]),[n,o]=(0,s.useState)(""),[a,r]=(0,s.useState)(!0),axiosFetch=async e=>{try{r(!0),o(""),t([]);let{method:n,url:s,headers:a=null,body:i=null}=e,c=await S.Z[n.toLowerCase()](s,i,a);t(c.data)}catch(e){o(e)}r(!1)};return[e,n,a,axiosFetch]},Users_UsersList=()=>{let e=(0,c.useRouter)(),[t,n]=(0,a.FV)(r.b),{setCookie:u}=(0,i.Z)(),[S,,b,T]=hooks_useAxios(),[Z,L]=(0,s.useState)([]),[k,C]=(0,s.useState)(!1),[z,E]=(0,s.useState)(""),[U,N]=(0,s.useState)({username:"",password:""}),[A,O]=(0,s.useState)(!1),B=(0,s.useRef)(null),F=(0,s.useRef)(null),{getTodoService:P}=(0,l.Z)(),fetchUsers=async()=>{await T({method:"get",url:"http://localhost:4000/users"})};if((0,s.useEffect)(()=>{fetchUsers()},[]),(0,s.useEffect)(()=>{L(S)},[S]),b)return(0,o.jsx)("div",{children:"Loading..."});let login=async t=>{t.preventDefault(),O(!0);let o=Z.find(e=>e.username===U.username).avatar,s={username:U.username,avatar:o},a=JSON.stringify(s);localStorage.setItem("userInfo",a);try{let t=btoa("".concat(U.username,":").concat(U.password));u("token",t,1);let o=await P(t);o&&o.length>0?(C(!1),n(o),O(!1),e.push("/dashboard")):(E(o.message),C(!0))}catch(e){throw C(!0),e}},clickHandler=e=>{O({...A,[e]:!0}),setTimeout(()=>O({...A,[e]:!1}),2e3)};return(0,o.jsxs)("form",{onSubmit:login,children:[(0,o.jsx)(h.Z,{fullWidth:!0,children:(0,o.jsx)(v.Z,{action:B,value:U.username,placeholder:x.Aq,required:!0,size:"lg",id:"selectUser",onChange:(e,t)=>N({username:t,password:""}),...U.username&&{endDecorator:(0,o.jsx)(f.Z,{size:"sm",variant:"plain",color:"neutral",onMouseDown:e=>{e.stopPropagation()},onClick:()=>{var e;N({username:"",password:""}),null===(e=B.current)||void 0===e||e.focusVisible()},children:(0,o.jsx)(j.Z,{})}),indicator:null},children:Z.map(e=>(0,o.jsxs)(y.Z,{value:e.username,label:e.name,children:[(0,o.jsx)(p.Z,{size:"sm",alt:e.name,src:e.avatar,loading:"lazy"}),e.name]},e.username))})}),(0,o.jsx)(m.Z,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:x.Qj,inputRef:F,onChange:e=>{N({...U,password:e.target.value})},type:"password",id:"password"}),k&&(0,o.jsx)(g.Z,{severity:"error",children:z}),(0,o.jsx)(_.Z,{type:"submit",fullWidth:!0,mt:"md",radius:"md",className:d().button,onClick:()=>clickHandler("button"),endIcon:A.button?(0,o.jsx)(w.Z,{size:20}):null,sx:{mt:3,mb:2},children:x.ym})]})}},5666:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return login}});var o=n(5893),s=n(7903),a=n.n(s),r=n(1159),i=n(640),Login_LoginForm=function(){return(0,o.jsxs)("section",{className:a().login,children:[(0,o.jsx)("h1",{children:r.v4}),(0,o.jsx)(i.Z,{})]})},login=()=>(0,o.jsx)("div",{className:"login",children:(0,o.jsx)(Login_LoginForm,{})})},6693:function(e,t,n){"use strict";n.d(t,{b:function(){return i}});var o=n(4480),s=n(6983),a=n(1159);let{persistAtom:r}=(0,s.J)({key:a.cL}),i=(0,o.cn)({key:"userTodoListState",default:[],effects:[r]})},6584:function(e,t,n){"use strict";var o=n(5403),s=n(7294);t.Z=()=>{let{getCookieByName:e}=(0,o.Z)(),[t,n]=(0,s.useState)(!1);(0,s.useEffect)(()=>{{let t=e("token");n(t)}},[e]);let getTodoService=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{let n=await fetch("http://localhost:4000/todos",{headers:{Authorization:"Basic "+(e||t),"Content-Type":"application/json"}});return n.json()}catch(e){throw e}},postTodoService=async e=>{let{task:n}=e;try{let e=await fetch("http://localhost:4000/todos",{method:"POST",headers:{Authorization:"Basic "+t,"Content-Type":"application/json"},body:JSON.stringify({task:n})});return e.json()}catch(e){throw e}},putTodoService=async e=>{try{let n=await fetch("http://localhost:4000/todos/".concat(e),{method:"PUT",headers:{Authorization:"Basic "+t,"Content-Type":"application/json"}});return n.json()}catch(e){throw e}},deleteTodoService=async e=>{try{let n=await fetch("http://localhost:4000/todos/".concat(e),{method:"DELETE",headers:{Authorization:"Basic "+t,"Content-Type":"application/json"}});return n.json()}catch(e){throw e}};return{getTodoService,postTodoService,putTodoService,deleteTodoService}}},7903:function(e){e.exports={login:"Login_login__1bCnz",control:"Login_control__Cz5U_",actions:"Login_actions__8KOuf",toggle:"Login_toggle__c4wOU"}},8759:function(e){e.exports={button:"UserList_button__h5vBX"}}},function(e){e.O(0,[106,615,774,888,179],function(){return e(e.s=6429)}),_N_E=e.O()}]);