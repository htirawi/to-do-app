(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[235],{9411:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/user",function(){return s(7989)}])},640:function(e,t,s){"use strict";s.d(t,{Z:function(){return Users_UsersList}});var n=s(5893),o=s(7294),a=s(4480),r=s(6693),i=s(5403),c=s(1163),u=s(6584),l=s(8759),d=s.n(l),h=s(4054),p=s(3946),f=s(9661),m=s(2510),y=s(1737),w=s(9417),v=s(8456),j=s(2846),S=s(2341),x=s(6191),b=s(1159),g=s(6154),hooks_useAxios=()=>{let[e,t]=(0,o.useState)([]),[s,n]=(0,o.useState)(""),[a,r]=(0,o.useState)(!0),axiosFetch=async e=>{try{r(!0),n(""),t([]);let{method:s,url:o,headers:a=null,body:i=null}=e,c=await g.Z[s.toLowerCase()](o,i,a);t(c.data)}catch(e){n(e)}r(!1)};return[e,s,a,axiosFetch]},Users_UsersList=()=>{let e=(0,c.useRouter)(),[t,s]=(0,a.FV)(r.b),{setCookie:l}=(0,i.Z)(),[g,,T,_]=hooks_useAxios(),[Z,k]=(0,o.useState)([]),[C,E]=(0,o.useState)(!1),[U,z]=(0,o.useState)(""),[L,N]=(0,o.useState)({username:"",password:""}),[A,B]=(0,o.useState)(!1),O=(0,o.useRef)(null),P=(0,o.useRef)(null),{getTodoService:D}=(0,u.Z)(),fetchUsers=async()=>{await _({method:"get",url:"http://localhost:4000/users"})};if((0,o.useEffect)(()=>{fetchUsers()},[]),(0,o.useEffect)(()=>{k(g)},[g]),T)return(0,n.jsx)("div",{children:"Loading..."});let login=async t=>{t.preventDefault(),B(!0);let n=Z.find(e=>e.username===L.username).avatar,o={username:L.username,avatar:n},a=JSON.stringify(o);localStorage.setItem("userInfo",a);try{let t=btoa("".concat(L.username,":").concat(L.password));l("token",t,1);let n=await D(t);n&&n.length>0?(E(!1),s(n),B(!1),e.push("/dashboard")):(z(n.message),E(!0))}catch(e){throw E(!0),e}},clickHandler=e=>{B({...A,[e]:!0}),setTimeout(()=>B({...A,[e]:!1}),2e3)};return(0,n.jsxs)("form",{onSubmit:login,children:[(0,n.jsx)(h.Z,{fullWidth:!0,children:(0,n.jsx)(j.Z,{action:O,value:L.username,placeholder:b.Aq,required:!0,size:"lg",id:"selectUser",onChange:(e,t)=>N({username:t,password:""}),...L.username&&{endDecorator:(0,n.jsx)(p.Z,{size:"sm",variant:"plain",color:"neutral",onMouseDown:e=>{e.stopPropagation()},onClick:()=>{var e;N({username:"",password:""}),null===(e=O.current)||void 0===e||e.focusVisible()},children:(0,n.jsx)(x.Z,{})}),indicator:null},children:Z.map(e=>(0,n.jsxs)(S.Z,{value:e.username,label:e.name,children:[(0,n.jsx)(f.Z,{size:"sm",alt:e.name,src:e.avatar,loading:"lazy"}),e.name]},e.username))})}),(0,n.jsx)(m.Z,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:b.Qj,inputRef:P,onChange:e=>{N({...L,password:e.target.value})},type:"password",id:"password"}),C&&(0,n.jsx)(y.Z,{severity:"error",children:U}),(0,n.jsx)(w.Z,{type:"submit",fullWidth:!0,mt:"md",radius:"md",className:d().button,onClick:()=>clickHandler("button"),endIcon:A.button?(0,n.jsx)(v.Z,{size:20}):null,sx:{mt:3,mb:2},children:b.ym})]})}},7989:function(e,t,s){"use strict";s.r(t);var n=s(5893),o=s(640);t.default=()=>(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{children:"Users"}),(0,n.jsx)("p",{children:"This page is only accessible by authenticated users."}),(0,n.jsx)(o.Z,{})]})},6693:function(e,t,s){"use strict";s.d(t,{b:function(){return i}});var n=s(4480),o=s(6983),a=s(1159);let{persistAtom:r}=(0,o.J)({key:a.cL}),i=(0,n.cn)({key:"userTodoListState",default:[],effects:[r]})},6584:function(e,t,s){"use strict";var n=s(5403),o=s(7294);t.Z=()=>{let{getCookieByName:e}=(0,n.Z)(),[t,s]=(0,o.useState)(!1);(0,o.useEffect)(()=>{{let t=e("token");s(t)}},[e]);let getTodoService=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{let s=await fetch("http://localhost:4000/todos",{headers:{Authorization:"Basic "+(e||t),"Content-Type":"application/json"}});return s.json()}catch(e){throw e}},postTodoService=async e=>{let{task:s}=e;try{let e=await fetch("http://localhost:4000/todos",{method:"POST",headers:{Authorization:"Basic "+t,"Content-Type":"application/json"},body:JSON.stringify({task:s})});return e.json()}catch(e){throw e}},putTodoService=async e=>{try{let s=await fetch("http://localhost:4000/todos/".concat(e),{method:"PUT",headers:{Authorization:"Basic "+t,"Content-Type":"application/json"}});return s.json()}catch(e){throw e}},deleteTodoService=async e=>{try{let s=await fetch("http://localhost:4000/todos/".concat(e),{method:"DELETE",headers:{Authorization:"Basic "+t,"Content-Type":"application/json"}});return s.json()}catch(e){throw e}};return{getTodoService,postTodoService,putTodoService,deleteTodoService}}},8759:function(e){e.exports={button:"UserList_button__h5vBX"}}},function(e){e.O(0,[106,615,774,888,179],function(){return e(e.s=9411)}),_N_E=e.O()}]);